{"version":3,"file":"index.modern.js","sources":["../src/index.js"],"sourcesContent":["import {cloneElement, createContext, isValidElement, useContext, useReducer} from \"react\";\r\nimport {ToastContainer} from \"react-bootstrap\";\r\n\r\nconst ToastContext = createContext([])\r\nconst handleToastList = (toastList, action) => {\r\n    if (action.type === \"addTop\") {\r\n        const _toastList = [...toastList];\r\n        _toastList.unshift(action.data);\r\n        return _toastList;\r\n    } else if (action.type === \"addBottom\") {\r\n        const _toastList = [...toastList];\r\n        _toastList.push(action.data);\r\n        return _toastList;\r\n    } else if (action.type === \"remove\") {\r\n        return toastList.filter((t) => t.id !== action.data.id);\r\n    } else {\r\n        return toastList;\r\n    }\r\n}\r\nexport const EasyToastContainer = ({children, ...props}) => {\r\n    const [toastList, dispatchToastList] = useReducer(handleToastList, []);\r\n    const showToast = (toastElement, addPosition) => {\r\n        const toastId = Math.random().toString(16).slice(2);\r\n        dispatchToastList({\r\n            type: addPosition === \"bottom\" ? \"addBottom\" : \"addTop\",\r\n            data: {\r\n                id: toastId,\r\n                element: handleToastElement(toastElement, toastId),\r\n            }\r\n        });\r\n    }\r\n    const closeToast = (event, toastId) => {\r\n        if(event && !toastId) {\r\n            let element = event.target;\r\n            while (element && !element.hasAttribute(\"data-toast-id\")) {\r\n                element = element.parentElement;\r\n            }\r\n            toastId = element.getAttribute(\"data-toast-id\");\r\n        }\r\n        if(toastId) {\r\n            dispatchToastList({\r\n                type: \"remove\",\r\n                data: {\r\n                    id: toastId\r\n                },\r\n            });\r\n        }\r\n    }\r\n    const handleToastElement = (toastElement, toastId) => {\r\n        if(isValidElement(toastElement) && typeof toastElement.type === 'function'){\r\n            return handleToastElement(toastElement.type(toastElement.props), toastId);\r\n        } else {\r\n            return cloneElement(\r\n                toastElement,\r\n                {\r\n                    key: toastId,\r\n                    \"data-toast-id\": toastId,\r\n                    onClose: () => closeToast(null, toastId)\r\n                },\r\n            )\r\n        }\r\n    }\r\n    return (\r\n        <>\r\n            <ToastContext.Provider value={[showToast, closeToast]}>\r\n                <ToastContainer {...props}>\r\n                    {toastList?.map(toast => (toast.element))}\r\n                </ToastContainer>\r\n                {children}\r\n            </ToastContext.Provider>\r\n        </>\r\n    )\r\n}\r\nexport const useEasyToast = () => {\r\n    const [showToast, closeToast] = useContext(ToastContext);\r\n    return [showToast, closeToast];\r\n}\r\n"],"names":["ToastContext","createContext","handleToastList","toastList","action","type","_toastList","unshift","data","push","filter","t","id","EasyToastContainer","_ref","children","props","_objectWithoutPropertiesLoose","_excluded","dispatchToastList","useReducer","closeToast","event","toastId","element","target","hasAttribute","parentElement","getAttribute","handleToastElement","toastElement","isValidElement","cloneElement","key","onClose","_jsx","_Fragment","_jsxs","Provider","value","showToast","addPosition","Math","random","toString","slice","ToastContainer","_extends","map","toast","useEasyToast","useContext"],"mappings":"sdAGMA,eAAeC,EAAc,IAC7BC,EAAkBA,CAACC,EAAWC,KAChC,GAAoB,WAAhBA,EAAOC,KAAmB,CAC1B,MAAMC,EAAa,IAAIH,GAEvB,OADAG,EAAWC,QAAQH,EAAOI,MACnBF,CACX,CAAO,GAAoB,cAAhBF,EAAOC,KAAsB,CACpC,MAAMC,EAAa,IAAIH,GAEvB,OADAG,EAAWG,KAAKL,EAAOI,MAChBF,CACX,CAAWF,MAAgB,WAAhBA,EAAOC,KACPF,EAAUO,OAAQC,GAAMA,EAAEC,KAAOR,EAAOI,KAAKI,IAE7CT,CACX,EAESU,EAAqBC,IAA0B,IAAzBC,SAACA,GAAmBD,EAANE,oIAAKC,CAAAH,EAAAI,GAClD,MAAOf,EAAWgB,GAAqBC,EAAWlB,EAAiB,IAW7DmB,EAAaA,CAACC,EAAOC,KACvB,GAAGD,IAAUC,EAAS,CAClB,IAAIC,EAAUF,EAAMG,OACpB,KAAOD,IAAYA,EAAQE,aAAa,kBACpCF,EAAUA,EAAQG,cAEtBJ,EAAUC,EAAQI,aAAa,gBACnC,CACGL,GACCJ,EAAkB,CACdd,KAAM,SACNG,KAAM,CACFI,GAAIW,IAGhB,EAEEM,EAAqBA,CAACC,EAAcP,iBACnCQ,EAAeD,IAA8C,mBAAtBA,EAAazB,KAC5CwB,EAAmBC,EAAazB,KAAKyB,EAAad,OAAQO,gBAE1DS,EACHF,EACA,CACIG,IAAKV,EACL,gBAAiBA,EACjBW,QAASA,IAAMb,EAAW,KAAME,kBAKhD,OACIY,EAAAC,EAAArB,CAAAA,sBACIsB,EAACrC,EAAasC,SAAQ,CAACC,MAAO,CA3CpBC,CAACV,EAAcW,KAC7B,MAAMlB,EAAUmB,KAAKC,SAASC,SAAS,IAAIC,MAAM,GACjD1B,EAAkB,CACdd,KAAsB,WAAhBoC,EAA2B,YAAc,SAC/CjC,KAAM,CACFI,GAAIW,EACJC,QAASK,EAAmBC,EAAcP,KAGtD,EAkCkDF,GAAYN,SAAA,cAClDoB,EAACW,EAAcC,EAAK/B,CAAAA,EAAAA,EAAKD,CAAAA,SACpBZ,MAAAA,OAAAA,EAAAA,EAAW6C,IAAIC,GAAUA,EAAMzB,YAEnCT,MAEP,EAGGmC,EAAeA,KACxB,MAAOV,EAAWnB,GAAc8B,EAAWnD,GAC3C,MAAO,CAACwC,EAAWnB,EAAU"}