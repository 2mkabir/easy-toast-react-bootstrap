{"version":3,"file":"index.module.js","sources":["../src/index.js"],"sourcesContent":["import {cloneElement, createContext, isValidElement, useContext, useReducer} from \"react\";\r\nimport {ToastContainer} from \"react-bootstrap\";\r\n\r\nconst ToastContext = createContext([])\r\nconst handleToastList = (toastList, action) => {\r\n    if (action.type === \"addTop\") {\r\n        const _toastList = [...toastList];\r\n        _toastList.unshift(action.data);\r\n        return _toastList;\r\n    } else if (action.type === \"addBottom\") {\r\n        const _toastList = [...toastList];\r\n        _toastList.push(action.data);\r\n        return _toastList;\r\n    } else if (action.type === \"remove\") {\r\n        return toastList.filter((t) => t.id !== action.data.id);\r\n    } else {\r\n        return toastList;\r\n    }\r\n}\r\nexport const EasyToastContainer = ({children, ...props}) => {\r\n    const [toastList, dispatchToastList] = useReducer(handleToastList, []);\r\n    const showToast = (toastElement, addPosition) => {\r\n        const toastId = Math.random().toString(16).slice(2);\r\n        dispatchToastList({\r\n            type: addPosition === \"bottom\" ? \"addBottom\" : \"addTop\",\r\n            data: {\r\n                id: toastId,\r\n                element: handleToastElement(toastElement, toastId),\r\n            }\r\n        });\r\n    }\r\n    const closeToast = (event, toastId) => {\r\n        if(event && !toastId) {\r\n            let element = event.target;\r\n            while (element && !element.hasAttribute(\"data-toast-id\")) {\r\n                element = element.parentElement;\r\n            }\r\n            toastId = element.getAttribute(\"data-toast-id\");\r\n        }\r\n        if(toastId) {\r\n            dispatchToastList({\r\n                type: \"remove\",\r\n                data: {\r\n                    id: toastId\r\n                },\r\n            });\r\n        }\r\n    }\r\n    const handleToastElement = (toastElement, toastId) => {\r\n        if(isValidElement(toastElement) && typeof toastElement.type === 'function'){\r\n            return handleToastElement(toastElement.type(toastElement.props), toastId);\r\n        } else {\r\n            return cloneElement(\r\n                toastElement,\r\n                {\r\n                    key: toastId,\r\n                    \"data-toast-id\": toastId,\r\n                    onClose: () => closeToast(null, toastId)\r\n                },\r\n            )\r\n        }\r\n    }\r\n    return (\r\n        <>\r\n            <ToastContext.Provider value={[showToast, closeToast]}>\r\n                <ToastContainer {...props}>\r\n                    {toastList?.map(toast => (toast.element))}\r\n                </ToastContainer>\r\n                {children}\r\n            </ToastContext.Provider>\r\n        </>\r\n    )\r\n}\r\nexport const useEasyToast = () => {\r\n    const [showToast, closeToast] = useContext(ToastContext);\r\n    return [showToast, closeToast];\r\n}\r\n"],"names":["_excluded","ToastContext","createContext","handleToastList","toastList","action","type","_toastList","concat","unshift","data","push","filter","t","id","EasyToastContainer","_ref","children","props","_objectWithoutPropertiesLoose","_useReducer","useReducer","dispatchToastList","closeToast","event","toastId","element","target","hasAttribute","parentElement","getAttribute","handleToastElement","toastElement","isValidElement","cloneElement","key","onClose","_jsx","_Fragment","_jsxs","Provider","value","addPosition","Math","random","toString","slice","ToastContainer","_extends","map","toast","useEasyToast","_useContext","useContext"],"mappings":"icAAA,IAAAA,EAAA,CAAA,YAGMC,eAAeC,EAAc,IAC7BC,EAAkB,SAACC,EAAWC,GAChC,GAAoB,WAAhBA,EAAOC,KAAmB,CAC1B,IAAMC,EAAU,GAAAC,OAAOJ,GAEvB,OADAG,EAAWE,QAAQJ,EAAOK,MACnBH,CACX,CAAO,GAAoB,cAAhBF,EAAOC,KAAsB,CACpC,IAAMC,EAAUC,GAAAA,OAAOJ,GAEvB,OADAG,EAAWI,KAAKN,EAAOK,MAChBH,CACX,CAAWF,MAAgB,WAAhBA,EAAOC,KACPF,EAAUQ,OAAO,SAACC,GAAM,OAAAA,EAAEC,KAAOT,EAAOK,KAAKI,EAAE,GAE/CV,CAEf,EACaW,EAAqB,SAAHC,GAAK,IAAAC,EAAQD,EAARC,SAAaC,oIAAKC,CAAAH,EAAAhB,GAClDoB,EAAuCC,EAAWlB,EAAiB,IAA5DC,EAASgB,EAAA,GAAEE,EAAiBF,EAAA,GAW7BG,EAAa,SAACC,EAAOC,GACvB,GAAGD,IAAUC,EAAS,CAElB,IADA,IAAIC,EAAUF,EAAMG,OACbD,IAAYA,EAAQE,aAAa,kBACpCF,EAAUA,EAAQG,cAEtBJ,EAAUC,EAAQI,aAAa,gBACnC,CACGL,GACCH,EAAkB,CACdhB,KAAM,SACNI,KAAM,CACFI,GAAIW,IAIpB,EACMM,EAAqB,SAArBA,EAAsBC,EAAcP,gBACtC,OAAGQ,EAAeD,IAA8C,mBAAtBA,EAAa1B,KAC5CyB,EAAmBC,EAAa1B,KAAK0B,EAAad,OAAQO,gBAE1DS,EACHF,EACA,CACIG,IAAKV,EACL,gBAAiBA,EACjBW,QAAS,WAAM,OAAAb,EAAW,KAAME,EAAQ,GAIxD,eACA,OACIY,EAAAC,EAAArB,CAAAA,sBACIsB,EAACtC,EAAauC,SAASC,CAAAA,MAAO,CA3CpB,SAACT,EAAcU,GAC7B,IAAMjB,EAAUkB,KAAKC,SAASC,SAAS,IAAIC,MAAM,GACjDxB,EAAkB,CACdhB,KAAsB,WAAhBoC,EAA2B,YAAc,SAC/ChC,KAAM,CACFI,GAAIW,EACJC,QAASK,EAAmBC,EAAcP,KAGtD,EAkCkDF,GAAYN,SAClDoB,cAAAA,EAACU,EAAcC,EAAK9B,CAAAA,EAAAA,EAAKD,CAAAA,SACpBb,MAAAA,OAAAA,EAAAA,EAAW6C,IAAI,SAAAC,GAAK,OAAKA,EAAMxB,OAAO,MAE1CT,MAIjB,EACakC,EAAe,WACxB,IAAAC,EAAgCC,EAAWpD,GAC3C,MAAO,CADSmD,EAAE7B,GAAU6B,EAC5B,GACJ"}